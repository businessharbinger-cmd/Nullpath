<script>
const terminal = document.getElementById("terminal");
const inputLine = document.getElementById("inputLine");

let authenticated = false;
const REQUIRED_USERNAME = "BASILISK";

// Disable input during boot
inputLine.disabled = true;

// Terminal responses
const responses = {
  "HELP": "Available commands:\n- HELP\n- MISSION LOG\n- ASPECTS\n- REDACTED PROJECT\n- EXIT",
  "MISSION LOG": "Mission 1: Operation Black Current\nMission 2: Operation Requiem\nMission 3: Vector Ascent\nMission 4: Hollow Sundown",
  "ASPECTS": "Aspects:\n- Basilisk\n- Others: [PENDING]",
  "REDACTED PROJECT": "ACCESS LEVEL: ASPECT\nProject: TYPHON\nExternal Alias: Nullpath\nSite: Cold Storage\nStatus: UNDER CONSTRUCTION",
  "EXIT": "Connection terminated."
};

// Print helper
function printOutput(text) {
  terminal.textContent += text + "\n";
  terminal.scrollTop = terminal.scrollHeight;
}

// ---- BOOT SEQUENCE ----
const bootLines = [
  "CHIMERA NODE // COLD STORAGE",
  "Firmware v3.17.Î”",
  "",
  "Initializing memory pools...",
  "Loading encrypted modules...",
  "Verifying kernel integrity...",
  "Mounting Nullpath interface...",
  "Establishing secure relay...",
  "Checking Aspect authorization...",
  "",
  "SYSTEM STATUS: NOMINAL",
  ""
];

let bootIndex = 0;

function runBootSequence() {
  if (bootIndex < bootLines.length) {
    printOutput(bootLines[bootIndex]);
    bootIndex++;
    setTimeout(runBootSequence, 350);
  } else {
    printOutput("USERNAME REQUIRED.");
    printOutput("");
    printOutput("USERNAME:");
    inputLine.disabled = false;
    inputLine.focus();
  }
}

// Handle input
inputLine.addEventListener("keydown", function (e) {
  if (e.key === "Enter") {
    const input = this.value.trim();
    printOutput("> " + input);
    this.value = "";

    // AUTH PHASE
    if (!authenticated) {
      if (input.toUpperCase() === REQUIRED_USERNAME) {
        authenticated = true;
        printOutput("IDENTITY CONFIRMED.");
        printOutput("ACCESS GRANTED.");
        printOutput("");
        printOutput("Welcome, BASILISK.");
        printOutput("Type HELP for available commands.");
      } else {
        printOutput("ACCESS DENIED.");
        printOutput("USERNAME:");
      }
      e.preventDefault();
      return;
    }

    // COMMAND PHASE
    const command = input.toUpperCase();
    if (responses[command]) {
      printOutput(responses[command]);
    } else {
      printOutput("UNKNOWN COMMAND.");
      printOutput("Type HELP for command list.");
    }

    e.preventDefault();
  }
});

// Start boot automatically
runBootSequence();
</script>
